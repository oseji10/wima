import{r as l,j as e,L as u,S as b}from"./app-CmqsXPyq.js";import{A as j}from"./app-layout-D-Z6Tefy.js";import"./button-BFcHP7PL.js";import"./index-BeVLLsHy.js";import"./index-BW4cuNEx.js";const N=[{title:"Transfers/Posting",href:"/transfers"}];function A({transfers:m,dbas:k}){var c;const[p,s]=l.useState(!1),[a,o]=l.useState(null),[d,i]=l.useState(!1),f=t=>{if(!t)return"N/A";const r=new Date(t);if(isNaN(r.getTime()))return"N/A";const n=String(r.getDate()).padStart(2,"0"),g=String(r.getMonth()+1).padStart(2,"0"),y=r.getFullYear();return`${n}/${g}/${y}`},h=t=>{o(t),s(!0)},x=t=>{if(!a)return;const r={status:t};console.log("Intended payload:",r),i(!0),b.put(`/transfers/${a.transferId}/respond`,r,{onSuccess:()=>{s(!1),o(null)},onError:n=>{console.error("Transfer response errors:",n)},onFinish:()=>{i(!1),console.log("Request sent with status:",t)}})};return e.jsxs(j,{breadcrumbs:N,children:[e.jsx(u,{title:"Transfers/Posting"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 relative",children:[e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Request date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Staff Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Transfer from"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Transfer to"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:m.map(t=>{var r;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:f(t.created_at)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:[t.staff.surname," ",t.staff.firstName," ",t.staff.otherNames]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:((r=t.from_dba)==null?void 0:r.dbaName)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:t.to_dba.dbaName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:t.status}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>h(t),className:"text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 dark:hover:text-yellow-300",title:"Respond to Transfer",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5h12m0 0l-4 4m4-4l-4-4M15 19H3m0 0l4-4m-4 4l4 4"})})})})})]},t.transferId)})})]})})}),p&&a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 w-full max-w-md mx-auto relative",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Confirm Transfer"}),e.jsx("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:"âœ•"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Staff: ",e.jsxs("strong",{children:[a.staff.surname," ",a.staff.firstName," ",a.staff.otherNames]})]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Transfer From: ",e.jsx("strong",{children:((c=a.from_dba)==null?void 0:c.dbaName)||"N/A"})]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Transfer To: ",e.jsx("strong",{children:a.to_dba.dbaName})]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Comment: ",e.jsx("strong",{children:a.comment||"N/A"})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Do you want to accept or reject this transfer request?"})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Cancel"}),e.jsx("button",{onClick:()=>x("Rejected"),disabled:d,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:d?"Processing...":"Reject"}),e.jsx("button",{onClick:()=>x("Accepted"),disabled:d,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:d?"Processing...":"Accept"})]})]})})]})]})}export{A as default};
