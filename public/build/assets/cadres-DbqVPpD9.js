import{r as o,m as v,j as e,L as $}from"./app-CmqsXPyq.js";import{A as V}from"./app-layout-D-Z6Tefy.js";import"./button-BFcHP7PL.js";import"./index-BeVLLsHy.js";import"./index-BW4cuNEx.js";const X=[{title:"Cadres",href:"/cadres"}];function ee({cadres:C,cadreGroups:m,cadreSubgroups:N}){var S;const[M,l]=o.useState(!1),[D,n]=o.useState(!1),[H,u]=o.useState(!1),[p,i]=o.useState(null),[L,f]=o.useState([]),{data:a,setData:s,post:P,put:A,delete:Z,processing:j,errors:d,reset:c}=v({cadreName:"",step:"",gradeLevel:"",maximumGradeLevel:"",maximumStep:"",cadreGroupId:"",cadreSubGroupId:""}),{data:B,setData:W,post:z,processing:k,errors:w,reset:b}=v({cadreGroupName:""}),{data:g,setData:h,post:R,processing:I,errors:x,reset:y}=v({cadreSubGroupName:"",cadreGroupId:""});o.useEffect(()=>{if(a.cadreGroupId){const r=N.filter(t=>t.cadreGroupId===Number(a.cadreGroupId));console.log("Filtered Subgroups:",r),f(r),s("cadreSubgroupId","")}else f([])},[a.cadreGroupId,N]);const J=r=>{r.preventDefault(),p?A(`/cadres/${p.cadreId}`,{onSuccess:()=>{l(!1),i(null),c()}}):P("/cadres",{onSuccess:()=>{l(!1),c()}})},O=r=>{r.preventDefault(),z("/cadre-groups",{onSuccess:()=>{n(!1),b()}})},E=r=>{r.preventDefault(),console.log("Subgroup Payload:",g),R("/cadre-subgroups",{onSuccess:()=>{u(!1),y()}})},_=r=>{var t,G;i(r),s({cadreName:r.cadreName,step:r.step,gradeLevel:r.gradeLevel,maximumGradeLevel:r.maximumGradeLevel,maximumStep:r.maximumStep,cadreGroupId:((t=r.cadreGroupId)==null?void 0:t.toString())||"",cadreSubgroupId:((G=r.cadreSubgroupId)==null?void 0:G.toString())||""}),l(!0)},Q=r=>{confirm("Are you sure you want to delete this record?")&&Z(`/cadres/${r}`)},U=()=>{a.cadreGroupId&&h("cadreGroupId",a.cadreGroupId),u(!0)};return e.jsxs(V,{breadcrumbs:X,children:[e.jsx($,{title:"Cadres"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 relative",children:[e.jsx("div",{className:"mb-4",children:e.jsx("button",{onClick:()=>{i(null),c(),l(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Add Cadre"})}),e.jsx("div",{className:"border-sidebar-border/70 dark:border-sidebar-border relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border md:min-h-min",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Cadre Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Group"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Subgroup"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Max GL"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Max Step"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:C.map(r=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:r.cadreId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:r.cadreName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:r.cadre_group.cadreGroupName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:r.cadre_subgroup.cadreSubGroupName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:r.maximumGradeLevel}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:r.maximumStep}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>_(r),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>Q(r.cadreId),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M4 7h16"})})})]})})]},r.cadreId))})]})})}),M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md sm:max-w-lg bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:p?"Edit Cadre":"Add New Cadre"}),e.jsx("button",{onClick:()=>{l(!1),i(null),c()},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none",children:"âœ•"})]}),e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cadre Name"}),e.jsx("input",{type:"text",value:a.cadreName,onChange:r=>s("cadreName",r.target.value),className:"block w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out",placeholder:"Enter Cadre name"}),d.cadreName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.cadreName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cadre Group"}),e.jsxs("select",{value:a.cadreGroupId,onChange:r=>{console.log("Selected Cadre Group ID:",r.target.value),s("cadreGroupId",r.target.value)},className:"block w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjYgOSAxMiAxNSAxOCA5Ij48L3BvbHlsaW5lPjwvc3ZnPg==')] bg-no-repeat bg-[right_0.75rem_center] bg-[length:1rem_1rem]",children:[e.jsx("option",{value:"",children:"Select Cadre Group"}),m.map(r=>e.jsx("option",{value:r.cadreGroupId,children:r.cadreGroupName},r.cadreGroupId))]}),e.jsx("button",{type:"button",onClick:()=>{console.log("Opening Cadre Group Modal"),n(!0)},className:"mt-2 text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Create New Cadre Group"}),d.cadreGroupId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.cadreGroupId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cadre Subgroup"}),e.jsxs("select",{value:a.cadreSubGroupId,onChange:r=>{console.log("Selected Cadre Subgroup ID:",r.target.value),s("cadreSubGroupId",r.target.value)},className:"block w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjYgOSAxMiAxNSAxOCA5Ij48L3BvbHlsaW5lPjwvc3ZnPg==')] bg-no-repeat bg-[right_0.75rem_center] bg-[length:1rem_1rem]",disabled:!a.cadreGroupId,children:[e.jsx("option",{value:"",children:"Select Cadre Subgroup"}),L.map(r=>e.jsx("option",{value:r.cadreSubGroupId,children:r.cadreSubGroupName},r.cadreSubGroupId))]}),e.jsx("button",{type:"button",onClick:U,className:"mt-2 text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",disabled:!a.cadreGroupId,children:"Create New Cadre Subgroup"}),d.cadreSubgroupId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.cadreSubgroupId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Maximum Grade Level"}),e.jsx("input",{type:"text",value:a.maximumGradeLevel,onChange:r=>{const t=r.target.value;(t===""||/^\d*$/.test(t)&&Number(t)>=0)&&s("maximumGradeLevel",t)},className:"block w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out",placeholder:"Enter Maximum Grade Level",pattern:"[0-9]*",inputMode:"numeric",style:{margin:0}}),d.maximumGradeLevel&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.maximumGradeLevel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Maximum Step"}),e.jsx("input",{type:"text",value:a.maximumStep,onChange:r=>{const t=r.target.value;(t===""||/^\d*$/.test(t)&&Number(t)>=0)&&s("maximumStep",t)},className:"block w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out",placeholder:"Enter Maximum Step",pattern:"[0-9]*",inputMode:"numeric",style:{margin:0}}),d.maximumStep&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.maximumStep})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),i(null),c()},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 transition duration-150 ease-in-out",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition duration-150 ease-in-out",children:j?"Saving...":"Save"})]})]})]})})}),D&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create New Cadre Group"}),e.jsx("button",{onClick:()=>{n(!1),b()},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none",children:"âœ•"})]}),e.jsxs("form",{onSubmit:O,children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cadre Group Name"}),e.jsx("input",{type:"text",value:B.cadreGroupName,onChange:r=>W("cadreGroupName",r.target.value),className:"block w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out",placeholder:"Enter Cadre Group name"}),w.cadreGroupName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:w.cadreGroupName})]})}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{n(!1),b()},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 transition duration-150 ease-in-out",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition duration-150 ease-in-out",children:k?"Saving...":"Save"})]})]})]})})}),H&&e.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 max-h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create New Cadre Subgroup"}),e.jsx("button",{onClick:()=>{u(!1),y()},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none",children:"âœ•"})]}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cadre Group"}),e.jsxs("select",{value:g.cadreGroupId||a.cadreGroupId,onChange:r=>h("cadreGroupId",r.target.value),className:"block w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjYgOSAxMiAxNSAxOCA5Ij48L3BvbHlsaW5lPjwvc3ZnPg==')] bg-no-repeat bg-[right_0.75rem_center] bg-[length:1rem_1rem]",children:[e.jsx("option",{value:"",children:a.cadreGroupId?(S=m.find(r=>r.cadreGroupId===Number(a.cadreGroupId)))==null?void 0:S.cadreGroupName:"Select Cadre Group"}),m.map(r=>e.jsx("option",{value:r.cadreGroupId,children:r.cadreGroupName},r.cadreGroupId))]}),x.cadreGroupId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.cadreGroupId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cadre Subgroup Name"}),e.jsx("input",{type:"text",value:g.cadreSubGroupName,onChange:r=>h("cadreSubGroupName",r.target.value),className:"block w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out",placeholder:"Enter Cadre Subgroup name"}),x.cadreSubGroupName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.cadreSubGroupName})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{u(!1),y()},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 transition duration-150 ease-in-out",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition duration-150 ease-in-out",children:I?"Saving...":"Save"})]})]})]})})})]})]})}export{ee as default};
